<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== CHARACTER ENCODING ===== -->
  <meta charset="UTF-8">
  
  <!-- ===== VIEWPORT SETTINGS ===== -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- ===== PAGE TITLE ===== -->
  <title>StudyMate - Q3 Loading...</title>
  
  <!-- ===== FAVICON ===== -->
  <link rel="icon" type="image/png" href="assets/StudyMate.png">
  
  <!-- ===== INLINE STYLES ===== -->
  <style>
    /* Body styling - centers content and adds gradient background */
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      overflow: hidden;
    }
    
    /* Container for centered content */
    .container {
      text-align: center;
      animation: fadeIn 0.5s ease-in;
    }
    
    /* Logo styling */
    .logo {
      width: 120px;
      height: 120px;
      margin-bottom: 20px;
      animation: bounce 1s ease-in-out infinite;
    }
    
    /* Main heading */
    h1 {
      font-size: 48px;
      margin-bottom: 10px;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* Subtitle */
    .subtitle {
      font-size: 20px;
      margin-bottom: 30px;
      opacity: 0.9;
    }
    
    /* Loading spinner animation */
    .loader {
      border: 6px solid rgba(255, 255, 255, 0.3);
      border-top: 6px solid #ffffff;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin: 30px auto;
    }
    
    /* Loading text */
    .loading-text {
      font-size: 18px;
      margin-top: 20px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    /* Progress bar container */
    .progress-container {
      width: 300px;
      height: 8px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      margin: 30px auto;
      overflow: hidden;
    }
    
    /* Progress bar fill */
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ffffff 0%, #f0f0f0 100%);
      border-radius: 10px;
      animation: progress 2s ease-in-out;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    /* Status message */
    .status {
      font-size: 16px;
      margin-top: 20px;
      opacity: 0.8;
      font-style: italic;
    }
    
    /* Keyframe animations */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    @keyframes progress {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    
    /* Responsive design */
    @media (max-width: 600px) {
      h1 { font-size: 36px; }
      .subtitle { font-size: 16px; }
      .logo { width: 80px; height: 80px; }
      .progress-container { width: 250px; }
    }
  </style>
</head>
<body>
  <!-- ===== MAIN CONTAINER ===== -->
  <div class="container">
    <!-- StudyMate Logo -->
    <img src="assets/StudyMate.png" alt="StudyMate Logo" class="logo">
    
    <!-- Main heading -->
    <h1>StudyMate Q3</h1>
    <p class="subtitle">Your Personal Study Companion</p>
    
    <!-- Loading spinner -->
    <div class="loader"></div>
    
    <!-- Progress bar -->
    <div class="progress-container">
      <div class="progress-bar"></div>
    </div>
    
    <!-- Loading text -->
    <p class="loading-text" id="loading-text">Initializing your study environment...</p>
    
    <!-- Status message -->
    <p class="status" id="status">Checking profile...</p>
  </div>
  
  <!-- ===== JAVASCRIPT ===== -->
  <script>
    // Loading messages to cycle through
    const loadingMessages = [
      'Initializing your study environment...',
      'Loading your profile...',
      'Preparing your study materials...',
      'Setting up your goals...',
      'Almost ready...'
    ];
    
    const statusMessages = [
      'Checking profile...',
      'Loading preferences...',
      'Syncing data...',
      'Finalizing setup...',
      'Ready to go! ðŸš€'
    ];
    
    let messageIndex = 0;
    
    // Update loading messages
    const messageInterval = setInterval(() => {
      messageIndex++;
      if (messageIndex < loadingMessages.length) {
        document.getElementById('loading-text').textContent = loadingMessages[messageIndex];
        document.getElementById('status').textContent = statusMessages[messageIndex];
      }
    }, 400);
    
    // Check if user has a profile
    setTimeout(() => {
      const userData = localStorage.getItem('studyMateUser');
      
      clearInterval(messageInterval);
      
      if (userData) {
        // User has profile - redirect to home
        const user = JSON.parse(userData);
        document.getElementById('loading-text').textContent = `Welcome back, ${user.name}! ðŸ‘‹`;
        document.getElementById('status').textContent = 'Redirecting to home...';
        
        setTimeout(() => {
          window.location.href = 'public/1-ProjectHome.html';
        }, 1000);
      } else {
        // No profile - redirect to sign up
        document.getElementById('loading-text').textContent = 'No profile found';
        document.getElementById('status').textContent = 'Redirecting to sign up...';
        
        setTimeout(() => {
          window.location.href = 'public/0-SignUp.html';
        }, 1000);
      }
    }, 2000);
  </script>
</body>
</html>
